### Variables
@host = http://localhost:4004
@eventId = 1
@participantId = 1

### =================== EVENTS ===================

### Get all events
GET {{host}}/odata/v4/event-catalog/Events

### Get specific event
GET {{host}}/odata/v4/event-catalog/Events({{eventId}})

### Get Event with participants
GET {{host}}/odata/v4/event-catalog/Events({{eventId}})?$expand=registrations

### Create new event
POST {{host}}/odata/v4/event-catalog/Events
content-type: application/json

{
    "ID": 6,
    "Name": "New SAP Event",
    "StartDate": "2024-12-17",
    "EndDate": "2024-12-20",
    "Location": "Paris, France",
    "Description": "New event description",
    "IsActive": true,
    "IsCancelled": false
}

### Cancel Event (Bound Action)
POST {{host}}/odata/v4/event-catalog/Events({{eventId}})/cancelEvent
content-type: application/json

{
    "reason": "Cancelled because of bad weather"
}

### Reopen Event (Bound Action)
POST {{host}}/odata/v4/event-catalog/Events({{eventId}})/reopenEvent

### =================== PARTICIPANTS ===================

### Get all participants
GET {{host}}/odata/v4/event-catalog/Participants

### Get specific participant
GET {{host}}/odata/v4/event-catalog/Participants({{participantId}})

### Get participant with event
GET {{host}}/odata/v4/event-catalog/Participants({{participantId}})?$expand=registrations

### Create new participant
POST {{host}}/odata/v4/event-catalog/Participants
content-type: application/json

{
    "ID": 3,
    "FirstName": "Jane",
    "LastName": "Doe",
    "Email": "jane.doe@example.com",
    "Phone": "+1-555-0111",
    "BusinessPartnerID": "BP003"
}

### Fetch Participant Details (Bound Action)
POST {{host}}/odata/v4/event-catalog/Participants({{participantId}})/fetchParticipantDetails

### =================== UNBOUND ACTIONS/FUNCTIONS ===================

### Register Participant (Unbound Action)
POST {{host}}/odata/v4/event-catalog/registerParticipant
content-type: application/json

{
    "eventId": 1,
    "participantData": {
        "FirstName": "Jane",
        "LastName": "Doe",
        "Email": "jane.doe@example.com",
        "Phone": "+1-555-0111",
        "BusinessPartnerID": "BP003"
    }
}

### Get Event Participants (Unbound Function)
GET {{host}}/odata/v4/event-catalog/getEventParticipants(eventId={{eventId}})

### =================== ERROR CASES ===================

### Try to cancel already cancelled event
POST {{host}}/odata/v4/event-catalog/Events({{eventId}})/cancelEvent
content-type: application/json

{
    "reason": "Already cancelled event"
}

### Try to register participant for cancelled event
POST {{host}}/odata/v4/event-catalog/registerParticipant
content-type: application/json

{
    "eventId": 1,
    "participantData": {
        "FirstName": "Error",
        "LastName": "Test",
        "Email": "error.test@example.com",
        "Phone": "+1-555-0333",
        "BusinessPartnerID": "BP013"
    }
}

### Try to Register Same Participant Again (Should Fail)
POST {{host}}/odata/v4/event-catalog/registerParticipant
Content-Type: application/json

{
    "eventId": 1,
    "participantId": 4
}

### Try to Register for Non-existent Event (Should Fail)
POST {{host}}/odata/v4/event-catalog/registerParticipant
Content-Type: application/json

{
    "eventId": 999,
    "participantId": 4
}

### =================== FLOW TEST ===================

### Create Participant
POST {{host}}/odata/v4/event-catalog/createParticipant
Content-Type: application/json

{
    "BusinessPartnerID": "1000000",
    "FirstName": "Vito",
    "LastName": "Corleone",
    "Email": "vito@example.com",
    "Phone": "1234567890"
}

### Register Participant
POST {{host}}/odata/v4/event-catalog/registerParticipant
Content-Type: application/json

{
    "eventId": 1,
    "participantId": 7
}

### Get Event Participants using Function
GET {{host}}/odata/v4/event-catalog/getEventParticipants(eventId=1)

### Update Participant
POST {{host}}/odata/v4/event-catalog/Participants(4)/updateParticipant
Content-Type: application/json

{
    "FirstName": "Vito",
    "LastName": "Corleone",
    "Email": "godfather@example.com",
    "Phone": "3333333333"
}